<html>
<head> 


</head>
<body> 
<canvas id="canvas" style="width:800; height:800; border: 1px solid black;">  Canvas nie działa </canvas>

<script type="text/javascript" src="animation.js"></script>
<script type="text/javascript"> 





window.onload = function() {



var myAnimation = new Animation("canvas");
       var canvas = myAnimation.getCanvas();
                var context = myAnimation.getContext();
                
                var linearSpeed = 200; // pikseli / sekundę
                var createBall = function(){
                	this.x = canvas.width / 2;
                	this.y = canvas. height / 2;
                	this.radius = 10;
                	this.yInverse = Math.floor(Math.random() * 2);
                	this.xInverse = Math.floor(Math.random() * 2);
                	this.colors = ["red", "green", "blue", "black", "grey"];
                	this.color = this.colors[Math.floor(Math.random() * 5)];
                	this.drawMe = function(Animation, linearDistEachFrame) {
                		//console.log(Math.round(this.y) + ":" + Math.round(this.x));
                		if(Math.round(this.y) >= rocket.y && Math.round(this.y) <= rocket.y + rocket.height && Math.round(this.x / 10) * 10 == rocket.x + rocket.width) 
                			{

                				this.xInverse = false;
                                console.log(this.yInverse);
                				if(Math.round(this.y) >= rocket.y && Math.round(this.y) < rocket.y + rocket.height / 2 )
                				{
                					this.yInverse = true;
                				}
                				else if(Math.round(this.y) > rocket.y + rocket.height / 2 && Math.round(this.y) <= rocket.y + rocket.height)
                				{
                					this.yInverse = false;
                				}
                				
                			}

                	   	
                		if(Math.round(this.x) >= canvas.width - this.radius) this.xInverse = true;  
		                else if(Math.round(this.x) < this.radius) myAnimation.stop();
		                

		                if(Math.round(this.y) >= canvas.height - this.radius) this.yInverse = true; 
		                else if(Math.round(this.y) <= this.radius) this.yInverse = false;

		                  if (this.xInverse == false) {
                        this.x += linearDistEachFrame * 0.7;
                        
	                    } 
	                    else {
	                    	this.x -= linearDistEachFrame;
	                    }

	                   
	                    		
	                    if (this.yInverse == false) {
	                    	this.y += linearDistEachFrame * 1.3;
	                    }
	                    else {
	                    	this.y -= linearDistEachFrame;
	                    }

	                    
	                    context.beginPath();
	                    context.fillStyle = this.color;
	                    context.arc(this.x, this.y, this.radius, 0, 2 * Math.PI,false);
	                    context.fill();
                	};
                };

                var rocket = {
                	x: 0,
                	y: 0,
                	width: 10,
                	height: 100,
                	distanc: 30, //per sec
                	draw: function(){
                		context.fillStyle = "black";
                		context.fillRect(this.x, this.y, this.width, this.height);
                	}

                }

             

                document.addEventListener('keydown', function(){
					var key_press = String.fromCharCode(event.keyCode);
						//alert(key_press);
					if(rocket.y + rocket.height > canvas.height) rocket.y = canvas.height - rocket.height;
					else if(rocket.y < 0) rocket.y = 0;	
						
					if(key_press == "S" && rocket.y + rocket.height < canvas.height) 
						{

							for(var i = 1; i < 31 ; i++)
							{
								setTimeout(function() {
									rocket.y+= rocket.distanc / 30;
									
								}, 2 * i);
							}

						}
					else if(key_press == "W" && rocket.y > 0) 
						{
							for(var i = 1; i < 31 ; i++)
							{
								setTimeout(function() {
									rocket.y-= rocket.distanc / 30;
									
								}, 2 * i);
							}

						}

						


					});





                

                var ball = [];

                for(var i = 0; i < 1; i++)
                {
                	ball[i] = new createBall();
                }



                /* = {
                    x: 0,
                    y: canvas.height / 2 - 25,
					radius: 10,                  
                    yInverse: false,
                    xInverse: false,
                };*/
                
                myAnimation.setDrawStage(function(){
                    // aktualizacja
                    var linearDistEachFrame = linearSpeed * this.getTimeInterval() / 1000;

                  		myAnimation.clear();

                  		rocket.draw();
                  		
                  		


                  		for(var i = 0;i < 1; i++)
                  		{
                  			ball[i].drawMe(myAnimation, linearDistEachFrame);
                    		
                  		}
                    	

                    	



                });

           
                myAnimation.start();
            };





</script>


</body>

</html>